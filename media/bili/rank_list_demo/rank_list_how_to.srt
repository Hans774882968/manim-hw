1
00:00:00,050 --> 00:00:03,512
大佬们好久不见，欢迎回到我的频道

2
00:00:03,512 --> 00:00:06,750
我们必须想象，做题人是幸福的

3
00:00:06,750 --> 00:00:09,775
我是Hans，大龄做题人一枚

4
00:00:09,775 --> 00:00:14,450
今天教大家如何用manim做从夯到拉锐评视频

5
00:00:14,450 --> 00:00:17,787
如果看过我上期的manim教学视频

6
00:00:17,787 --> 00:00:21,787
那么写出这期视频的代码将会很轻松

7
00:00:21,787 --> 00:00:25,137
做从夯到拉锐评视频主要步骤有

8
00:00:25,137 --> 00:00:28,337
1，画出从夯到拉的背景图

9
00:00:28,337 --> 00:00:33,362
2，展示初始素材图片，并设置成合适的大小

10
00:00:33,362 --> 00:00:39,937
3，让素材图片一边缩小到一行矩形的高度，一边移动到正确位置

11
00:00:39,937 --> 00:00:42,612
首先讲怎么画背景图

12
00:00:42,612 --> 00:00:47,325
我先找了一个网站截图，然后让通义千问帮我复刻

13
00:00:47,325 --> 00:00:49,487
最后自己调整代码

14
00:00:49,487 --> 00:00:53,787
提示词没啥弯弯绕绕，直接叫它复刻就行

15
00:00:53,787 --> 00:00:59,137
不过生成效果只是看着像回事，免不了古法手作调整

16
00:00:59,137 --> 00:01:01,512
接下来简单说下代码

17
00:01:01,512 --> 00:01:07,362
对于每一行的左侧矩形，我们都需要把对应的文字放到它的中心

18
00:01:07,362 --> 00:01:11,100
所以调用了label_rect.get_center()

19
00:01:11,100 --> 00:01:16,987
右侧矩形紧挨着左侧矩形的右边界，所以调用了next_to方法

20
00:01:16,987 --> 00:01:20,837
接下来是难点：确定每个矩形的宽和高

21
00:01:20,837 --> 00:01:24,925
LLM完全没能力考虑到这里要讲的问题

22
00:01:24,925 --> 00:01:27,425
我们单独看前6行代码

23
00:01:27,425 --> 00:01:32,062
首先要确定左侧矩形的宽和对应的字体大小

24
00:01:32,062 --> 00:01:36,275
和CSS不同，在manim里，如果字太大

25
00:01:36,275 --> 00:01:41,625
不仅会溢出矩形，还会导致这一行的所有矩形都发生错位

26
00:01:41,625 --> 00:01:47,612
调试发现，60px字体配0.2倍屏幕宽刚好合适

27
00:01:47,612 --> 00:01:52,812
接着在调试过程中发现，类似于CSS的content-box

28
00:01:52,812 --> 00:01:56,062
边框宽度不包含在矩形宽度里

29
00:01:56,062 --> 00:02:00,462
所以如果直接让左右矩形宽度和等于屏幕宽度

30
00:02:00,462 --> 00:02:05,775
就会导致左矩形左边框和右矩形右边框只能显示一半

31
00:02:05,775 --> 00:02:11,112
为了解决这个问题，我们让两个矩形的宽度各减去边框宽度

32
00:02:11,112 --> 00:02:17,062
但注意到边框宽度的单位是像素，所以还需要转换成逻辑宽度

33
00:02:17,062 --> 00:02:22,000
根据边框占屏幕宽度的比例，我们列出屏幕里的等式

34
00:02:22,000 --> 00:02:25,837
于是就得到了代码里的STROKE_LOGIC_WIDTH

35
00:02:25,837 --> 00:02:29,675
类似地，我们顺便定义了边框逻辑高度

36
00:02:29,675 --> 00:02:34,300
它在row_height里不是必需的，不过我还是让它参与了

37
00:02:34,300 --> 00:02:36,437
接着看怎么画素材

38
00:02:36,437 --> 00:02:39,800
ImageMobject需要给出图片的路径

39
00:02:39,800 --> 00:02:43,487
编程基础较差的人可能会在这里踩坑

40
00:02:43,487 --> 00:02:45,562
正确做法就一句话

41
00:02:45,562 --> 00:02:49,462
设置相对于项目根目录的相对路径就行

42
00:02:49,462 --> 00:02:53,762
这里还用到一个新的API：scale_to_fit_height

43
00:02:53,762 --> 00:02:58,450
根据官方文档，它会在保留图片宽高比的前提下

44
00:02:58,450 --> 00:03:01,675
让图片的高度变成给定的高度

45
00:03:01,675 --> 00:03:06,625
然后看怎么让素材图片一边缩小到一行矩形的高度

46
00:03:06,625 --> 00:03:08,925
一边移动到正确位置

47
00:03:08,925 --> 00:03:14,787
素材图片的最终高度直接设置为row_height会占据一部分边框

48
00:03:14,787 --> 00:03:19,562
观感不好，所以我们减去了0.5倍STROKE_LOGIC_HEIGHT

49
00:03:19,562 --> 00:03:25,575
实测发现这个倍数并不精确，但看着效果OK，我就不深究了

50
00:03:25,575 --> 00:03:28,375
然后看怎么确定最终位置

51
00:03:28,375 --> 00:03:33,887
我试过问LLM，但它给的代码是直接计算最终坐标的

52
00:03:33,887 --> 00:03:38,287
为了方便，我们暂不考虑放到两行之间的情况

53
00:03:38,287 --> 00:03:42,862
这样就可以简化为用next_to，避免直接计算坐标

54
00:03:42,862 --> 00:03:45,412
于是我们需要分两种情况

55
00:03:45,412 --> 00:03:50,437
情况1，这一行还没有图片，对应屏幕里第一段代码

56
00:03:50,437 --> 00:03:53,487
我们放到这一行左侧矩形的右边

57
00:03:53,487 --> 00:03:57,587
因为矩形的边框宽度不包含在矩形宽度里

58
00:03:57,587 --> 00:03:59,862
所以需要给一个buffer

59
00:03:59,862 --> 00:04:05,362
实测发现，代码里的0.5倍STROKE_LOGIC_WIDTH并不精确

60
00:04:05,362 --> 00:04:09,400
但看着效果还行，我就不细细琢磨精确解了

61
00:04:09,400 --> 00:04:14,487
情况2，这一行已经有图片，对应屏幕里第二段代码

62
00:04:14,487 --> 00:04:17,762
我们放到本行最后一张图片的右边

63
00:04:17,762 --> 00:04:21,850
因为图片没有边框，所以直接紧挨着就行

64
00:04:21,850 --> 00:04:26,537
剪视频时想到，这里可以额外每行维护一个数组

65
00:04:26,537 --> 00:04:31,412
取数组最后一个元素，表示当前元素要紧挨着它

66
00:04:31,412 --> 00:04:35,662
不过这期视频的代码比较简单，我就没这么写

67
00:04:35,662 --> 00:04:39,687
另外，屏幕第一段代码有3个等待时间

68
00:04:39,687 --> 00:04:43,425
这是根据旁白读每句话的时长来调整的

69
00:04:43,425 --> 00:04:48,062
如果有大佬有更好的方法，请在评论区教教Hans~

70
00:04:48,062 --> 00:04:52,450
对完整代码感兴趣的大佬可以点击简介的链接~

71
00:04:52,450 --> 00:04:57,987
我是Hans，我正致力于为做题人的精神自留地添砖加瓦

72
00:04:57,987 --> 00:05:01,887
如果你喜欢这期视频，别忘了一键三连哦

73
00:05:01,887 --> 00:05:03,375
谢谢观看~

